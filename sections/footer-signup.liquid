{% comment %}
  Footer newsletter signup section for Tashola
  Automatically tags all new subscribers with "newsletter"
  and sends them into Shopify Email App segment
{% endcomment %}

<section class="footer-signup">
  <div class="page-width footer-signup__inner">
    {% if section.settings.heading != blank %}
      <p class="footer-signup__heading">{{ section.settings.heading }}</p>
    {% endif %}

    {% form 'customer', class: 'footer-signup__form' %}
      <input type="hidden" name="contact[tags]" value="newsletter">
      <label for="FooterNewsletter-{{ section.id }}" class="visually-hidden">
        {{ 'general.newsletter_form.email_placeholder' | t: default: 'Email address' }}
      </label>
      <input
        id="FooterNewsletter-{{ section.id }}"
        type="email"
        name="contact[email]"
        placeholder="{{ section.settings.placeholder }}"
        value="{{ form.email }}"
        autocorrect="off"
        autocapitalize="off"
        autocomplete="email"
        required
        class="footer-signup__input"
      >
      <button type="submit" class="footer-signup__button">{{ section.settings.button_label }}</button>

      {% if form.posted_successfully? %}
        <p class="footer-signup__success">{{ section.settings.success_message }}</p>
      {% elsif form.errors %}
        <p class="footer-signup__error">{{ form.errors.translated_fields['email'] | default: form.errors.messages['email'] }}</p>
      {% endif %}
    {% endform %}
  </div>

  <style>
    .footer-signup {
      background-color: #f6f4f3;
      padding: 2rem 0;
      text-align: center;
    }
    .footer-signup__heading {
      font-size: 1.4rem;
      margin-bottom: 1rem;
      color: #1a1411;
    }
    .footer-signup__form {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      flex-wrap: wrap;
      gap: 0.5rem;
    }
    .footer-signup__input {
      border: 1px solid #1a1411;
      background: #fff;
      padding: 0.8rem 1rem;
      min-width: 240px;
      font-size: 1.2rem;
      border-right: none;
    }
    .footer-signup__button {
      background-color: #3b2523;
      color: #fff;
      border: none;
      padding: 0.8rem 2rem;
      font-size: 1.2rem;
      cursor: pointer;
      transition: opacity .2s ease;
    }
    .footer-signup__button:hover { opacity: .85; }
    .footer-signup__success { color: #0a7f43; margin-top: 1rem; }
    .footer-signup__error { color: #b81818; margin-top: 1rem; }
  </style>
</section>

{% schema %}
{
  "name": "Footer Signup",
  "tag": "section",
  "class": "section footer-signup-section",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Join our newsletter for early-access and exclusive offers"
    },
    {
      "type": "text",
      "id": "placeholder",
      "label": "Email placeholder",
      "default": "Email address"
    },
    {
      "type": "text",
      "id": "button_label",
      "label": "Button label",
      "default": "Sign Up"
    },
    {
      "type": "text",
      "id": "success_message",
      "label": "Success message",
      "default": "Thank you for subscribing!"
    }
  ],
  "presets": [
    {
      "name": "Footer Signup"
    }
  ]
}
{% endschema %}
